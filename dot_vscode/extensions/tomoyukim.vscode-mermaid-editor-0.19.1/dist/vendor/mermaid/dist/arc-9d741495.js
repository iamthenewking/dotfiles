import{c as constant,p as path}from"./constant-b644328d.js";import{aC as halfPi,aD as epsilon,V as tau,aE as cos,aF as sin,aG as sqrt,aH as min,aI as abs,aJ as pi,aK as atan2,aL as asin,aM as acos,aN as max}from"./mermaid-766fee4c.js";function arcInnerRadius(n){return n.innerRadius}function arcOuterRadius(n){return n.outerRadius}function arcStartAngle(n){return n.startAngle}function arcEndAngle(n){return n.endAngle}function arcPadAngle(n){return n&&n.padAngle}function intersect(n,a,t,r,s,c,e,i){var o=t-n,l=r-a,u=e-s,p=i-c,y=p*o-u*l;if(!(y*y<epsilon))return[n+(y=(u*(a-c)-p*(n-s))/y)*o,a+y*l]}function cornerTangents(n,a,t,r,s,c,e){var i=n-t,o=a-r,l=(e?c:-c)/sqrt(i*i+o*o),u=l*o,p=-l*i,y=n+u,f=a+p,x=t+u,d=r+p,g=(y+x)/2,h=(f+d)/2,m=x-y,v=d-f,T=m*m+v*v,A=s-c,R=y*d-x*f,q=(v<0?-1:1)*sqrt(max(0,A*A*T-R*R)),P=(R*v-m*q)/T,b=(-R*m-v*q)/T,E=(R*v+m*q)/T,I=(-R*m+v*q)/T,j=P-g,O=b-h,S=E-g,C=I-h;return j*j+O*O>S*S+C*C&&(P=E,b=I),{cx:P,cy:b,x01:-u,y01:-p,x11:P*(s/A-1),y11:b*(s/A-1)}}function d3arc(){var n=arcInnerRadius,a=arcOuterRadius,t=constant(0),r=null,s=arcStartAngle,c=arcEndAngle,e=arcPadAngle,i=null;function o(){var o,l,u=+n.apply(this,arguments),p=+a.apply(this,arguments),y=s.apply(this,arguments)-halfPi,f=c.apply(this,arguments)-halfPi,x=abs(f-y),d=f>y;if(i||(i=o=path()),p<u&&(l=p,p=u,u=l),p>epsilon)if(x>tau-epsilon)i.moveTo(p*cos(y),p*sin(y)),i.arc(0,0,p,y,f,!d),u>epsilon&&(i.moveTo(u*cos(f),u*sin(f)),i.arc(0,0,u,f,y,d));else{var g,h,m=y,v=f,T=y,A=f,R=x,q=x,P=e.apply(this,arguments)/2,b=P>epsilon&&(r?+r.apply(this,arguments):sqrt(u*u+p*p)),E=min(abs(p-u)/2,+t.apply(this,arguments)),I=E,j=E;if(b>epsilon){var O=asin(b/u*sin(P)),S=asin(b/p*sin(P));(R-=2*O)>epsilon?(T+=O*=d?1:-1,A-=O):(R=0,T=A=(y+f)/2),(q-=2*S)>epsilon?(m+=S*=d?1:-1,v-=S):(q=0,m=v=(y+f)/2)}var C=p*cos(m),D=p*sin(m),F=u*cos(A),G=u*sin(A);if(E>epsilon){var H,J=p*cos(v),K=p*sin(v),L=u*cos(T),M=u*sin(T);if(x<pi&&(H=intersect(C,D,L,M,J,K,F,G))){var N=C-H[0],V=D-H[1],k=J-H[0],w=K-H[1],z=1/sin(acos((N*k+V*w)/(sqrt(N*N+V*V)*sqrt(k*k+w*w)))/2),B=sqrt(H[0]*H[0]+H[1]*H[1]);I=min(E,(u-B)/(z-1)),j=min(E,(p-B)/(z+1))}}q>epsilon?j>epsilon?(g=cornerTangents(L,M,C,D,p,j,d),h=cornerTangents(J,K,F,G,p,j,d),i.moveTo(g.cx+g.x01,g.cy+g.y01),j<E?i.arc(g.cx,g.cy,j,atan2(g.y01,g.x01),atan2(h.y01,h.x01),!d):(i.arc(g.cx,g.cy,j,atan2(g.y01,g.x01),atan2(g.y11,g.x11),!d),i.arc(0,0,p,atan2(g.cy+g.y11,g.cx+g.x11),atan2(h.cy+h.y11,h.cx+h.x11),!d),i.arc(h.cx,h.cy,j,atan2(h.y11,h.x11),atan2(h.y01,h.x01),!d))):(i.moveTo(C,D),i.arc(0,0,p,m,v,!d)):i.moveTo(C,D),u>epsilon&&R>epsilon?I>epsilon?(g=cornerTangents(F,G,J,K,u,-I,d),h=cornerTangents(C,D,L,M,u,-I,d),i.lineTo(g.cx+g.x01,g.cy+g.y01),I<E?i.arc(g.cx,g.cy,I,atan2(g.y01,g.x01),atan2(h.y01,h.x01),!d):(i.arc(g.cx,g.cy,I,atan2(g.y01,g.x01),atan2(g.y11,g.x11),!d),i.arc(0,0,u,atan2(g.cy+g.y11,g.cx+g.x11),atan2(h.cy+h.y11,h.cx+h.x11),d),i.arc(h.cx,h.cy,I,atan2(h.y11,h.x11),atan2(h.y01,h.x01),!d))):i.arc(0,0,u,A,T,d):i.lineTo(F,G)}else i.moveTo(0,0);if(i.closePath(),o)return i=null,o+""||null}return o.centroid=function(){var t=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2,r=(+s.apply(this,arguments)+ +c.apply(this,arguments))/2-pi/2;return[cos(r)*t,sin(r)*t]},o.innerRadius=function(a){return arguments.length?(n="function"==typeof a?a:constant(+a),o):n},o.outerRadius=function(n){return arguments.length?(a="function"==typeof n?n:constant(+n),o):a},o.cornerRadius=function(n){return arguments.length?(t="function"==typeof n?n:constant(+n),o):t},o.padRadius=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:constant(+n),o):r},o.startAngle=function(n){return arguments.length?(s="function"==typeof n?n:constant(+n),o):s},o.endAngle=function(n){return arguments.length?(c="function"==typeof n?n:constant(+n),o):c},o.padAngle=function(n){return arguments.length?(e="function"==typeof n?n:constant(+n),o):e},o.context=function(n){return arguments.length?(i=null==n?null:n,o):i},o}export{d3arc as d};