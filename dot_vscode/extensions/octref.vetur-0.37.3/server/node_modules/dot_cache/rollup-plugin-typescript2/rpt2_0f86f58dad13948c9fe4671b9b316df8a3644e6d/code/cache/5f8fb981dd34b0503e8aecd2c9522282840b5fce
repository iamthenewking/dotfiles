{"code":"import { Location, Range, SymbolKind } from 'vscode-languageserver-types';\r\nexport function findDocumentSymbols(document, htmlDocument) {\r\n    const symbols = [];\r\n    htmlDocument.roots.forEach(node => {\r\n        provideFileSymbolsInternal(document, node, '', symbols);\r\n    });\r\n    return symbols;\r\n}\r\nfunction provideFileSymbolsInternal(document, node, container, symbols) {\r\n    if (node.isInterpolation) {\r\n        return;\r\n    }\r\n    const name = nodeToName(node);\r\n    if (name !== '') {\r\n        const location = Location.create(document.uri, Range.create(document.positionAt(node.start), document.positionAt(node.end)));\r\n        const symbol = {\r\n            name,\r\n            location,\r\n            containerName: container,\r\n            kind: SymbolKind.Field\r\n        };\r\n        symbols.push(symbol);\r\n    }\r\n    node.children.forEach(child => {\r\n        provideFileSymbolsInternal(document, child, name, symbols);\r\n    });\r\n}\r\nfunction nodeToName(node) {\r\n    let name = node.tag;\r\n    if (!name) {\r\n        return '';\r\n    }\r\n    if (node.attributes) {\r\n        const id = node.attributes['id'];\r\n        const classes = node.attributes['class'];\r\n        const slotRelatedAttrs = getVueSlotAttributes(node);\r\n        if (id) {\r\n            name += `#${id.replace(/[\\\"\\']/g, '')}`;\r\n        }\r\n        if (classes) {\r\n            name += classes\r\n                .replace(/[\\\"\\']/g, '')\r\n                .split(/\\s+/)\r\n                .map(className => `.${className}`)\r\n                .join('');\r\n        }\r\n        if (slotRelatedAttrs.length > 0) {\r\n            name += `[${slotRelatedAttrs.join(' ')}]`;\r\n        }\r\n    }\r\n    return name;\r\n}\r\nfunction getVueSlotAttributes(node) {\r\n    var _a;\r\n    const vueSlotAttributes = node.attributeNames.filter(attr => attr.startsWith('#') || attr.startsWith('v-slot:'));\r\n    const slotName = (_a = node.attributes) === null || _a === void 0 ? void 0 : _a.name;\r\n    if (node.tag === 'slot' && slotName) {\r\n        vueSlotAttributes.push(`name=${slotName}`);\r\n    }\r\n    return vueSlotAttributes;\r\n}\r\n//# sourceMappingURL=htmlSymbolsProvider.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-types/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-textdocument/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/parser/htmlParser.ts"],"map":"{\"version\":3,\"file\":\"htmlSymbolsProvider.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/modes/template/services/htmlSymbolsProvider.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/template/services/htmlSymbolsProvider.d.ts","writeByteOrderMark":false,"text":"import { SymbolInformation } from 'vscode-languageserver-types';\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { HTMLDocument } from '../parser/htmlParser';\r\nexport declare function findDocumentSymbols(document: TextDocument, htmlDocument: HTMLDocument): SymbolInformation[];\r\n"}}
