{"code":"import { ESLint } from 'eslint';\r\nimport { configs } from 'eslint-plugin-vue';\r\nimport { Range, DiagnosticSeverity } from 'vscode-languageserver-types';\r\nimport { VueVersion } from '../../../utils/vueVersion';\r\nfunction toDiagnostic(error) {\r\n    const line = error.line - 1;\r\n    const column = error.column - 1;\r\n    const endLine = error.endLine ? error.endLine - 1 : line;\r\n    const endColumn = error.endColumn ? error.endColumn - 1 : column;\r\n    return {\r\n        range: Range.create(line, column, endLine, endColumn),\r\n        message: `[${error.ruleId}]\\n${error.message}`,\r\n        source: 'eslint-plugin-vue',\r\n        severity: error.severity === 1 ? DiagnosticSeverity.Warning : DiagnosticSeverity.Error\r\n    };\r\n}\r\nexport async function doESLintValidation(document, engine) {\r\n    var _a, _b, _c;\r\n    const rawText = document.getText();\r\n    // skip checking on empty template\r\n    if (rawText.replace(/\\s/g, '') === '') {\r\n        return [];\r\n    }\r\n    const text = rawText.replace(/ {10}/, '<template>') + '</template>';\r\n    const report = await engine.lintText(text, { filePath: document.uri });\r\n    return (_c = (_b = (_a = report === null || report === void 0 ? void 0 : report[0]) === null || _a === void 0 ? void 0 : _a.messages) === null || _b === void 0 ? void 0 : _b.map(toDiagnostic)) !== null && _c !== void 0 ? _c : [];\r\n}\r\nexport function createLintEngine(vueVersion) {\r\n    var _a;\r\n    const SERVER_ROOT = __dirname;\r\n    const versionSpecificConfig = vueVersion === VueVersion.V30 ? configs['vue3-essential'] : configs.essential;\r\n    if (vueVersion === VueVersion.V30) {\r\n        versionSpecificConfig.parserOptions = Object.assign(Object.assign({}, versionSpecificConfig.parserOptions), { vueFeatures: Object.assign(Object.assign({}, (_a = versionSpecificConfig.parserOptions) === null || _a === void 0 ? void 0 : _a.vueFeatures), { interpolationAsNonHTML: true }) });\r\n    }\r\n    versionSpecificConfig.rules = Object.assign(Object.assign({}, versionSpecificConfig.rules), { 'vue/multi-word-component-names': 0 });\r\n    const baseConfig = configs.base;\r\n    baseConfig.ignorePatterns = ['!.*'];\r\n    return new ESLint({\r\n        useEslintrc: false,\r\n        cwd: SERVER_ROOT,\r\n        baseConfig,\r\n        overrideConfig: versionSpecificConfig\r\n    });\r\n}\r\n//# sourceMappingURL=htmlEslintValidation.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/@types/eslint/index.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/eslint-plugin-vue/lib/index.js","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-types/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-textdocument/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/src/utils/vueVersion.ts"],"map":"{\"version\":3,\"file\":\"htmlEslintValidation.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/modes/template/services/htmlEslintValidation.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAU,MAAM,QAAQ,CAAC;AACxC,OAAO,EAAE,OAAO,EAAE,MAAM,mBAAmB,CAAC;AAC5C,OAAO,EAAc,KAAK,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AAGpF,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AAEvD,SAAS,YAAY,CAAC,KAAyB;IAC7C,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;IAC5B,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;IAChC,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACzD,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IACjE,OAAO;QACL,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,CAAC;QACrD,OAAO,EAAE,IAAI,KAAK,CAAC,MAAM,MAAM,KAAK,CAAC,OAAO,EAAE;QAC9C,MAAM,EAAE,mBAAmB;QAC3B,QAAQ,EAAE,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,kBAAkB,CAAC,KAAK;KACvF,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,QAAsB,EAAE,MAAc;;IAC7E,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,kCAAkC;IAClC,IAAI,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE;QACrC,OAAO,EAAE,CAAC;KACX;IACD,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,GAAG,aAAa,CAAC;IACpE,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,QAAQ,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;IAEvE,OAAO,MAAA,MAAA,MAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAG,CAAC,CAAC,0CAAE,QAAQ,0CAAE,GAAG,CAAC,YAAY,CAAC,mCAAI,EAAE,CAAC;AACxD,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,UAAsB;;IACrD,MAAM,WAAW,GAAG,SAAS,CAAC;IAE9B,MAAM,qBAAqB,GACzB,UAAU,KAAK,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC;IAChF,IAAI,UAAU,KAAK,UAAU,CAAC,GAAG,EAAE;QACjC,qBAAqB,CAAC,aAAa,mCAC9B,qBAAqB,CAAC,aAAa,KACtC,WAAW,kCACN,MAAA,qBAAqB,CAAC,aAAa,0CAAE,WAAW,KACnD,sBAAsB,EAAE,IAAI,MAE/B,CAAC;KACH;IACD,qBAAqB,CAAC,KAAK,mCACtB,qBAAqB,CAAC,KAAK,KAC9B,gCAAgC,EAAE,CAAC,GACpC,CAAC;IAEF,MAAM,UAAU,GAAkB,OAAO,CAAC,IAAI,CAAC;IAC/C,UAAU,CAAC,cAAc,GAAG,CAAC,KAAK,CAAC,CAAC;IAEpC,OAAO,IAAI,MAAM,CAAC;QAChB,WAAW,EAAE,KAAK;QAClB,GAAG,EAAE,WAAW;QAChB,UAAU;QACV,cAAc,EAAE,qBAAqB;KACtC,CAAC,CAAC;AACL,CAAC\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/template/services/htmlEslintValidation.d.ts","writeByteOrderMark":false,"text":"import { ESLint } from 'eslint';\r\nimport { Diagnostic } from 'vscode-languageserver-types';\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { VueVersion } from '../../../utils/vueVersion';\r\nexport declare function doESLintValidation(document: TextDocument, engine: ESLint): Promise<Diagnostic[]>;\r\nexport declare function createLintEngine(vueVersion: VueVersion): ESLint;\r\n"}}
