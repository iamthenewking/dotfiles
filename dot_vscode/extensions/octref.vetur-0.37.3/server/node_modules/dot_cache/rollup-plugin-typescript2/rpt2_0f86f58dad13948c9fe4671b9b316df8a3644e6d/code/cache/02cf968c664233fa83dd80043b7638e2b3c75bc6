{"code":"import { HtmlTokenType, createScanner } from '../parser/htmlScanner';\r\nimport { DocumentHighlightKind } from 'vscode-languageserver-types';\r\nexport function findDocumentHighlights(document, position, htmlDocument) {\r\n    const offset = document.offsetAt(position);\r\n    const node = htmlDocument.findNodeAt(offset);\r\n    if (!node.tag) {\r\n        return [];\r\n    }\r\n    const result = [];\r\n    const startTagRange = getTagNameRange(HtmlTokenType.StartTag, document, node.start);\r\n    const endTagRange = typeof node.endTagStart === 'number' && getTagNameRange(HtmlTokenType.EndTag, document, node.endTagStart);\r\n    if ((startTagRange && covers(startTagRange, position)) || (endTagRange && covers(endTagRange, position))) {\r\n        if (startTagRange) {\r\n            result.push({ kind: DocumentHighlightKind.Read, range: startTagRange });\r\n        }\r\n        if (endTagRange) {\r\n            result.push({ kind: DocumentHighlightKind.Read, range: endTagRange });\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction isBeforeOrEqual(pos1, pos2) {\r\n    return pos1.line < pos2.line || (pos1.line === pos2.line && pos1.character <= pos2.character);\r\n}\r\nfunction covers(range, position) {\r\n    return isBeforeOrEqual(range.start, position) && isBeforeOrEqual(position, range.end);\r\n}\r\nfunction getTagNameRange(tokenType, document, startOffset) {\r\n    const scanner = createScanner(document.getText(), startOffset);\r\n    let token = scanner.scan();\r\n    while (token !== HtmlTokenType.EOS && token !== tokenType) {\r\n        token = scanner.scan();\r\n    }\r\n    if (token !== HtmlTokenType.EOS) {\r\n        return { start: document.positionAt(scanner.getTokenOffset()), end: document.positionAt(scanner.getTokenEnd()) };\r\n    }\r\n    return null;\r\n}\r\n//# sourceMappingURL=htmlHighlighting.js.map","references":["/Users/yoyo930021/git/vetur/server/src/modes/template/parser/htmlParser.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/parser/htmlScanner.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-types/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-textdocument/lib/umd/main.d.ts"],"map":"{\"version\":3,\"file\":\"htmlHighlighting.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/modes/template/services/htmlHighlighting.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACrE,OAAO,EAAmB,qBAAqB,EAAqB,MAAM,6BAA6B,CAAC;AAGxG,MAAM,UAAU,sBAAsB,CACpC,QAAsB,EACtB,QAAkB,EAClB,YAA0B;IAE1B,MAAM,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC3C,MAAM,IAAI,GAAG,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IAC7C,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;QACb,OAAO,EAAE,CAAC;KACX;IACD,MAAM,MAAM,GAAG,EAAE,CAAC;IAClB,MAAM,aAAa,GAAG,eAAe,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACpF,MAAM,WAAW,GACf,OAAO,IAAI,CAAC,WAAW,KAAK,QAAQ,IAAI,eAAe,CAAC,aAAa,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAC5G,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC,EAAE;QACxG,IAAI,aAAa,EAAE;YACjB,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,qBAAqB,CAAC,IAAI,EAAE,KAAK,EAAE,aAAa,EAAE,CAAC,CAAC;SACzE;QACD,IAAI,WAAW,EAAE;YACf,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,qBAAqB,CAAC,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,CAAC;SACvE;KACF;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,SAAS,eAAe,CAAC,IAAc,EAAE,IAAc;IACrD,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC;AAChG,CAAC;AAED,SAAS,MAAM,CAAC,KAAY,EAAE,QAAkB;IAC9C,OAAO,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,eAAe,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACxF,CAAC;AAED,SAAS,eAAe,CAAC,SAAwB,EAAE,QAAsB,EAAE,WAAmB;IAC5F,MAAM,OAAO,GAAG,aAAa,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,WAAW,CAAC,CAAC;IAC/D,IAAI,KAAK,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;IAC3B,OAAO,KAAK,KAAK,aAAa,CAAC,GAAG,IAAI,KAAK,KAAK,SAAS,EAAE;QACzD,KAAK,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;KACxB;IACD,IAAI,KAAK,KAAK,aAAa,CAAC,GAAG,EAAE;QAC/B,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC;KAClH;IACD,OAAO,IAAI,CAAC;AACd,CAAC\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/template/services/htmlHighlighting.d.ts","writeByteOrderMark":false,"text":"import { HTMLDocument } from '../parser/htmlParser';\r\nimport { Position, DocumentHighlight } from 'vscode-languageserver-types';\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nexport declare function findDocumentHighlights(document: TextDocument, position: Position, htmlDocument: HTMLDocument): DocumentHighlight[];\r\n"}}
