{"code":"import { DiagnosticSeverity, Range, TextEdit } from 'vscode-languageserver-types';\r\nimport { URI } from 'vscode-uri';\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { mapBackRange, mapFromPositionToOffset } from '../../services/typescriptService/sourceMap';\r\nimport { createTemplateDiagnosticFilter } from '../../services/typescriptService/diagnosticFilter';\r\nimport { toCompletionItemKind } from '../../services/typescriptService/util';\r\nimport { isVCancellationRequested } from '../../utils/cancellationToken';\r\nimport { getFileFsPath } from '../../utils/paths';\r\nimport { NULL_COMPLETION } from '../nullMode';\r\nimport { languageServiceIncludesFile } from '../script/javascript';\r\nimport * as Previewer from '../script/previewer';\r\nimport { isInsideInterpolation } from './services/isInsideInterpolation';\r\nexport class VueInterpolationMode {\r\n    constructor(documentRegions, tsModule, serviceHost, env, vueDocuments, vueInfoService) {\r\n        this.documentRegions = documentRegions;\r\n        this.tsModule = tsModule;\r\n        this.serviceHost = serviceHost;\r\n        this.env = env;\r\n        this.vueDocuments = vueDocuments;\r\n        this.vueInfoService = vueInfoService;\r\n    }\r\n    getId() {\r\n        return 'vue-html-interpolation';\r\n    }\r\n    queryVirtualFileInfo(fileName, currFileText) {\r\n        return this.serviceHost.queryVirtualFileInfo(fileName, currFileText);\r\n    }\r\n    getChildComponents(document) {\r\n        var _a;\r\n        return this.env.getConfig().vetur.validation.templateProps\r\n            ? this.vueInfoService && ((_a = this.vueInfoService.getInfo(document)) === null || _a === void 0 ? void 0 : _a.componentInfo.childComponents)\r\n            : [];\r\n    }\r\n    isInterpolationMode(document) {\r\n        return (this.env.getConfig().vetur.experimental.templateInterpolationService &&\r\n            !this.documentRegions\r\n                .refreshAndGet(document)\r\n                .getLanguageRangesOfType('script')\r\n                .some(region => region.attrs.setup));\r\n    }\r\n    async doValidation(document, cancellationToken) {\r\n        if (await isVCancellationRequested(cancellationToken)) {\r\n            return [];\r\n        }\r\n        if (!this.isInterpolationMode(document) || !this.env.getConfig().vetur.validation.interpolation) {\r\n            return [];\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return [];\r\n        }\r\n        if (await isVCancellationRequested(cancellationToken)) {\r\n            return [];\r\n        }\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        // We don't need syntactic diagnostics because\r\n        // compiled template is always valid JavaScript syntax.\r\n        const rawTemplateDiagnostics = templateService.getSemanticDiagnostics(templateFileFsPath);\r\n        const templateDiagnosticFilter = createTemplateDiagnosticFilter(this.tsModule);\r\n        return rawTemplateDiagnostics.filter(templateDiagnosticFilter).map(diag => {\r\n            // syntactic/semantic diagnostic always has start and length\r\n            // so we can safely cast diag to TextSpan\r\n            return {\r\n                range: mapBackRange(templateDoc, diag, templateSourceMap),\r\n                severity: DiagnosticSeverity.Error,\r\n                message: this.tsModule.flattenDiagnosticMessageText(diag.messageText, '\\n'),\r\n                code: diag.code,\r\n                source: 'Vetur'\r\n            };\r\n        });\r\n    }\r\n    doComplete(document, position) {\r\n        if (!this.isInterpolationMode(document)) {\r\n            return NULL_COMPLETION;\r\n        }\r\n        const offset = document.offsetAt(position);\r\n        const node = this.vueDocuments.refreshAndGet(document).findNodeBefore(offset);\r\n        const nodeRange = Range.create(document.positionAt(node.start), document.positionAt(node.end));\r\n        const nodeText = document.getText(nodeRange);\r\n        if (!isInsideInterpolation(node, nodeText, offset - node.start)) {\r\n            return NULL_COMPLETION;\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return NULL_COMPLETION;\r\n        }\r\n        /**\r\n         * In the cases of empty content inside node\r\n         * For example, completion in {{ | }}\r\n         * Source map would only map this position {{|  }}\r\n         * And position mapped back wouldn't fall into any source map ranges\r\n         */\r\n        let completionPos = position;\r\n        // Case {{ }}\r\n        if (node.isInterpolation) {\r\n            if (nodeText.match(/{{\\s*}}/)) {\r\n                completionPos = document.positionAt(node.start + '{{'.length);\r\n            }\r\n        }\r\n        // Todo: Case v-, : or @ directives\r\n        const mappedOffset = mapFromPositionToOffset(templateDoc, completionPos, templateSourceMap);\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        /**\r\n         * A lot of times interpolation expressions aren't valid\r\n         * TODO: Make sure interpolation expression, even incomplete, can generate incomplete\r\n         * TS files that can be fed into language service\r\n         */\r\n        let completions;\r\n        try {\r\n            completions = templateService.getCompletionsAtPosition(templateFileFsPath, mappedOffset, {\r\n                includeCompletionsWithInsertText: true,\r\n                includeCompletionsForModuleExports: false\r\n            });\r\n        }\r\n        catch (err) {\r\n            console.log('Interpolation completion failed');\r\n            console.error(err.stack);\r\n        }\r\n        if (!completions) {\r\n            return NULL_COMPLETION;\r\n        }\r\n        const tsItems = completions.entries.map((entry, index) => {\r\n            return {\r\n                uri: templateDoc.uri,\r\n                position,\r\n                label: entry.name,\r\n                sortText: entry.name.startsWith('$') ? '1' + entry.sortText : '0' + entry.sortText,\r\n                kind: toCompletionItemKind(entry.kind),\r\n                textEdit: entry.replacementSpan &&\r\n                    TextEdit.replace(mapBackRange(templateDoc, entry.replacementSpan, templateSourceMap), entry.name),\r\n                data: {\r\n                    // data used for resolving item details (see 'doResolve')\r\n                    languageId: 'vue-html',\r\n                    uri: templateDoc.uri,\r\n                    offset: position,\r\n                    source: entry.source,\r\n                    tsData: entry.data\r\n                }\r\n            };\r\n        });\r\n        return {\r\n            isIncomplete: false,\r\n            items: tsItems\r\n        };\r\n    }\r\n    doResolve(document, item) {\r\n        if (!this.isInterpolationMode(document)) {\r\n            return item;\r\n        }\r\n        /**\r\n         * resolve is called for both HTMl and interpolation completions\r\n         * HTML completions send back no data\r\n         */\r\n        if (!item.data) {\r\n            return item;\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return item;\r\n        }\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        const mappedOffset = mapFromPositionToOffset(templateDoc, item.data.offset, templateSourceMap);\r\n        const details = templateService.getCompletionEntryDetails(templateFileFsPath, mappedOffset, item.label, undefined, undefined, undefined, undefined);\r\n        if (details) {\r\n            item.detail = Previewer.plain(this.tsModule.displayPartsToString(details.displayParts));\r\n            const documentation = {\r\n                kind: 'markdown',\r\n                value: this.tsModule.displayPartsToString(details.documentation) + '\\n\\n'\r\n            };\r\n            if (details.tags) {\r\n                if (details.tags) {\r\n                    details.tags.forEach(x => {\r\n                        const tagDoc = Previewer.getTagDocumentation(x);\r\n                        if (tagDoc) {\r\n                            documentation.value += tagDoc + '\\n\\n';\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            item.documentation = documentation;\r\n            delete item.data;\r\n        }\r\n        return item;\r\n    }\r\n    doHover(document, position) {\r\n        if (!this.isInterpolationMode(document)) {\r\n            return { contents: [] };\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return {\r\n                contents: []\r\n            };\r\n        }\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        const mappedPosition = mapFromPositionToOffset(templateDoc, position, templateSourceMap);\r\n        const info = templateService.getQuickInfoAtPosition(templateFileFsPath, mappedPosition);\r\n        if (info) {\r\n            const display = this.tsModule.displayPartsToString(info.displayParts);\r\n            const markedContents = [{ language: 'ts', value: display }];\r\n            let hoverMdDoc = '';\r\n            const doc = Previewer.plain(this.tsModule.displayPartsToString(info.documentation));\r\n            if (doc) {\r\n                hoverMdDoc += doc + '\\n\\n';\r\n            }\r\n            if (info.tags) {\r\n                info.tags.forEach(x => {\r\n                    const tagDoc = Previewer.getTagDocumentation(x);\r\n                    if (tagDoc) {\r\n                        hoverMdDoc += tagDoc + '\\n\\n';\r\n                    }\r\n                });\r\n            }\r\n            if (hoverMdDoc.trim() !== '') {\r\n                markedContents.push(hoverMdDoc);\r\n            }\r\n            return {\r\n                range: mapBackRange(templateDoc, info.textSpan, templateSourceMap),\r\n                contents: markedContents\r\n            };\r\n        }\r\n        return { contents: [] };\r\n    }\r\n    findDefinition(document, position) {\r\n        if (!this.isInterpolationMode(document)) {\r\n            return [];\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return [];\r\n        }\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        const mappedPosition = mapFromPositionToOffset(templateDoc, position, templateSourceMap);\r\n        const definitions = templateService.getDefinitionAtPosition(templateFileFsPath, mappedPosition);\r\n        if (!definitions) {\r\n            return [];\r\n        }\r\n        const definitionResults = [];\r\n        const program = templateService.getProgram();\r\n        if (!program) {\r\n            return [];\r\n        }\r\n        definitions.forEach(r => {\r\n            const definitionTargetDoc = r.fileName === templateFileFsPath ? document : getSourceDoc(r.fileName, program);\r\n            if (definitionTargetDoc) {\r\n                const range = r.fileName === templateFileFsPath\r\n                    ? mapBackRange(templateDoc, r.textSpan, templateSourceMap)\r\n                    : convertRange(definitionTargetDoc, r.textSpan);\r\n                definitionResults.push({\r\n                    uri: URI.file(definitionTargetDoc.uri).toString(),\r\n                    range\r\n                });\r\n            }\r\n        });\r\n        return definitionResults;\r\n    }\r\n    findReferences(document, position) {\r\n        if (!this.isInterpolationMode(document)) {\r\n            return [];\r\n        }\r\n        // Add suffix to process this doc as vue template.\r\n        const templateDoc = TextDocument.create(document.uri + '.template', document.languageId, document.version, document.getText());\r\n        const { templateService, templateSourceMap } = this.serviceHost.updateCurrentVirtualVueTextDocument(templateDoc, this.getChildComponents(document));\r\n        if (!languageServiceIncludesFile(templateService, templateDoc.uri)) {\r\n            return [];\r\n        }\r\n        const templateFileFsPath = getFileFsPath(templateDoc.uri);\r\n        const mappedPosition = mapFromPositionToOffset(templateDoc, position, templateSourceMap);\r\n        const references = templateService.getReferencesAtPosition(templateFileFsPath, mappedPosition);\r\n        if (!references) {\r\n            return [];\r\n        }\r\n        const referenceResults = [];\r\n        const program = templateService.getProgram();\r\n        if (!program) {\r\n            return [];\r\n        }\r\n        references.forEach(r => {\r\n            const referenceTargetDoc = r.fileName === templateFileFsPath ? document : getSourceDoc(r.fileName, program);\r\n            if (referenceTargetDoc) {\r\n                const range = r.fileName === templateFileFsPath\r\n                    ? mapBackRange(templateDoc, r.textSpan, templateSourceMap)\r\n                    : convertRange(referenceTargetDoc, r.textSpan);\r\n                referenceResults.push({\r\n                    uri: URI.file(referenceTargetDoc.uri).toString(),\r\n                    range\r\n                });\r\n            }\r\n        });\r\n        return referenceResults;\r\n    }\r\n    onDocumentRemoved() { }\r\n    dispose() { }\r\n}\r\nfunction getSourceDoc(fileName, program) {\r\n    const sourceFile = program.getSourceFile(fileName);\r\n    return TextDocument.create(fileName, 'vue', 0, sourceFile.getFullText());\r\n}\r\nfunction convertRange(document, span) {\r\n    const startPosition = document.positionAt(span.start);\r\n    const endPosition = document.positionAt(span.start + span.length);\r\n    return Range.create(startPosition, endPosition);\r\n}\r\n//# sourceMappingURL=interpolationMode.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-types/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-uri/lib/umd/index.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-textdocument/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/src/embeddedSupport/languageModelCache.ts","/Users/yoyo930021/git/vetur/server/src/embeddedSupport/languageModes.ts","/Users/yoyo930021/git/vetur/server/src/services/typescriptService/serviceHost.ts","/Users/yoyo930021/git/vetur/server/src/services/typescriptService/sourceMap.ts","/Users/yoyo930021/git/vetur/server/node_modules/typescript/lib/typescript.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/@types/lodash/index.d.ts","/Users/yoyo930021/git/vetur/server/src/services/typescriptService/diagnosticFilter.ts","/Users/yoyo930021/git/vetur/server/src/services/typescriptService/util.ts","/Users/yoyo930021/git/vetur/server/src/services/vueInfoService.ts","/Users/yoyo930021/git/vetur/server/src/utils/cancellationToken.ts","/Users/yoyo930021/git/vetur/server/src/utils/paths.ts","/Users/yoyo930021/git/vetur/server/src/modes/nullMode.ts","/Users/yoyo930021/git/vetur/server/src/modes/script/javascript.ts","/Users/yoyo930021/git/vetur/server/src/modes/script/previewer.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/parser/htmlParser.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/services/isInsideInterpolation.ts","/Users/yoyo930021/git/vetur/server/src/services/dependencyService.ts","/Users/yoyo930021/git/vetur/server/src/services/EnvironmentService.ts","/Users/yoyo930021/git/vetur/server/src/embeddedSupport/embeddedSupport.ts"],"map":"{\"version\":3,\"file\":\"interpolationMode.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/modes/template/interpolationMode.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/template/interpolationMode.d.ts","writeByteOrderMark":false,"text":"import { CompletionItem, CompletionList, Diagnostic, Location, MarkedString, Position, Range } from 'vscode-languageserver-types';\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { LanguageModelCache } from '../../embeddedSupport/languageModelCache';\r\nimport { LanguageMode } from '../../embeddedSupport/languageModes';\r\nimport { IServiceHost } from '../../services/typescriptService/serviceHost';\r\nimport { VueInfoService } from '../../services/vueInfoService';\r\nimport { VCancellationToken } from '../../utils/cancellationToken';\r\nimport { HTMLDocument } from './parser/htmlParser';\r\nimport { RuntimeLibrary } from '../../services/dependencyService';\r\nimport { EnvironmentService } from '../../services/EnvironmentService';\r\nimport { VueDocumentRegions } from '../../embeddedSupport/embeddedSupport';\r\nexport declare class VueInterpolationMode implements LanguageMode {\r\n    private documentRegions;\r\n    private tsModule;\r\n    private serviceHost;\r\n    private env;\r\n    private vueDocuments;\r\n    private vueInfoService?;\r\n    constructor(documentRegions: LanguageModelCache<VueDocumentRegions>, tsModule: RuntimeLibrary['typescript'], serviceHost: IServiceHost, env: EnvironmentService, vueDocuments: LanguageModelCache<HTMLDocument>, vueInfoService?: VueInfoService | undefined);\r\n    getId(): string;\r\n    queryVirtualFileInfo(fileName: string, currFileText: string): {\r\n        source: string;\r\n        sourceMapNodesString: string;\r\n    };\r\n    private getChildComponents;\r\n    private isInterpolationMode;\r\n    doValidation(document: TextDocument, cancellationToken?: VCancellationToken): Promise<Diagnostic[]>;\r\n    doComplete(document: TextDocument, position: Position): CompletionList;\r\n    doResolve(document: TextDocument, item: CompletionItem): CompletionItem;\r\n    doHover(document: TextDocument, position: Position): {\r\n        contents: MarkedString[];\r\n        range?: Range;\r\n    };\r\n    findDefinition(document: TextDocument, position: Position): Location[];\r\n    findReferences(document: TextDocument, position: Position): Location[];\r\n    onDocumentRemoved(): void;\r\n    dispose(): void;\r\n}\r\n"}}
