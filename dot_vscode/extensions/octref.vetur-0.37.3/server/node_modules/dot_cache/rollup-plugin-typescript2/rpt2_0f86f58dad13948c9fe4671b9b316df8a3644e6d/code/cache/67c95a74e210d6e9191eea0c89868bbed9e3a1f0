{"code":"import { getHTML5TagProvider } from './htmlTags';\r\nimport { getVueTagProvider } from './vueTags';\r\nimport { getRouterTagProvider } from './routerTags';\r\nimport { elementTagProvider, onsenTagProvider, bootstrapTagProvider, gridsomeTagProvider, getDependencyTagProvider, getWorkspaceTagProvider } from './externalTagProviders';\r\nimport fs from 'fs';\r\nimport { join } from 'path';\r\nimport { getNuxtTagProvider } from './nuxtTags';\r\nimport { normalizeFileNameResolve } from '../../../utils/paths';\r\nexport let allTagProviders = [\r\n    getHTML5TagProvider(),\r\n    getVueTagProvider(),\r\n    getRouterTagProvider(),\r\n    elementTagProvider,\r\n    onsenTagProvider,\r\n    bootstrapTagProvider,\r\n    gridsomeTagProvider\r\n];\r\nexport function getTagProviderSettings(packagePath) {\r\n    const settings = {\r\n        '__vetur-workspace': true,\r\n        html5: true,\r\n        vue: true,\r\n        router: false,\r\n        element: false,\r\n        onsen: false,\r\n        bootstrap: false,\r\n        buefy: false,\r\n        vuetify: false,\r\n        quasar: false,\r\n        'quasar-framework': false,\r\n        nuxt: false,\r\n        gridsome: false\r\n    };\r\n    try {\r\n        if (!packagePath) {\r\n            return settings;\r\n        }\r\n        const packageRoot = normalizeFileNameResolve(packagePath, '../');\r\n        const rootPkgJson = JSON.parse(fs.readFileSync(packagePath, 'utf-8'));\r\n        const dependencies = rootPkgJson.dependencies || {};\r\n        const devDependencies = rootPkgJson.devDependencies || {};\r\n        if (dependencies['vue-router'] || devDependencies['vue-router']) {\r\n            settings['vue-router'] = true;\r\n        }\r\n        if (dependencies['element-ui'] || devDependencies['element-ui']) {\r\n            settings['element'] = true;\r\n        }\r\n        if (dependencies['vue-onsenui'] || devDependencies['vue-onsenui']) {\r\n            settings['onsen'] = true;\r\n        }\r\n        if (dependencies['bootstrap-vue'] || devDependencies['bootstrap-vue']) {\r\n            settings['bootstrap'] = true;\r\n        }\r\n        if (dependencies['buefy'] || devDependencies['buefy']) {\r\n            settings['buefy'] = true;\r\n        }\r\n        if (dependencies['nuxt-buefy'] || devDependencies['nuxt-buefy']) {\r\n            dependencies['buefy'] = true;\r\n        }\r\n        if (dependencies['vuetify'] || devDependencies['vuetify']) {\r\n            settings['vuetify'] = true;\r\n        }\r\n        if (dependencies['@nuxtjs/vuetify'] || devDependencies['@nuxtjs/vuetify']) {\r\n            dependencies['vuetify'] = true;\r\n        }\r\n        // Quasar v1+:\r\n        if (dependencies['quasar'] || devDependencies['quasar']) {\r\n            settings['quasar'] = true;\r\n        }\r\n        // Quasar pre v1 on non quasar-cli:\r\n        if (dependencies['quasar-framework']) {\r\n            settings['quasar-framework'] = true;\r\n        }\r\n        // Quasar pre v1 on quasar-cli:\r\n        if (devDependencies['quasar-cli']) {\r\n            // pushing dependency so we can check it\r\n            // and enable Quasar later below in the for()\r\n            dependencies['quasar-framework'] = '^0.0.17';\r\n        }\r\n        if (dependencies['nuxt'] || dependencies['nuxt-edge'] || devDependencies['nuxt'] || devDependencies['nuxt-edge']) {\r\n            const nuxtTagProvider = getNuxtTagProvider(packageRoot);\r\n            if (nuxtTagProvider) {\r\n                settings['nuxt'] = true;\r\n                allTagProviders.push(nuxtTagProvider);\r\n            }\r\n        }\r\n        if (dependencies['gridsome']) {\r\n            settings['gridsome'] = true;\r\n        }\r\n        const workspaceTagProvider = getWorkspaceTagProvider(packageRoot, rootPkgJson);\r\n        if (workspaceTagProvider) {\r\n            allTagProviders.push(workspaceTagProvider);\r\n        }\r\n        for (const dep of [...Object.keys(dependencies), ...Object.keys(devDependencies)]) {\r\n            let runtimePkgJsonPath;\r\n            try {\r\n                runtimePkgJsonPath = require.resolve(join(dep, 'package.json'), { paths: [packageRoot] });\r\n            }\r\n            catch (_a) {\r\n                continue;\r\n            }\r\n            const runtimePkgJson = JSON.parse(fs.readFileSync(runtimePkgJsonPath, 'utf-8'));\r\n            if (!runtimePkgJson) {\r\n                continue;\r\n            }\r\n            const depTagProvider = getDependencyTagProvider(packageRoot, dep, runtimePkgJson);\r\n            if (!depTagProvider) {\r\n                continue;\r\n            }\r\n            allTagProviders.push(depTagProvider);\r\n            settings[dep] = true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.error(e.stack);\r\n    }\r\n    return settings;\r\n}\r\nexport function getEnabledTagProviders(tagProviderSetting) {\r\n    return allTagProviders.filter(p => tagProviderSetting[p.getId()] !== false);\r\n}\r\n//# sourceMappingURL=index.js.map","references":["/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/common.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/htmlTags.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/vueTags.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/routerTags.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/externalTagProviders.ts","/Users/yoyo930021/git/vetur/server/src/modes/template/tagProviders/nuxtTags.ts","/Users/yoyo930021/git/vetur/server/src/utils/paths.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/modes/template/tagProviders/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/template/tagProviders/index.d.ts","writeByteOrderMark":false,"text":"import { IHTMLTagProvider } from './common';\r\nexport declare let allTagProviders: IHTMLTagProvider[];\r\nexport interface CompletionConfiguration {\r\n    [provider: string]: boolean;\r\n}\r\nexport declare function getTagProviderSettings(packagePath: string | undefined): CompletionConfiguration;\r\nexport declare function getEnabledTagProviders(tagProviderSetting: CompletionConfiguration): IHTMLTagProvider[];\r\n"}}
