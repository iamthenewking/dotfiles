{"code":"import { readFileSync } from 'fs';\r\nexport var VueVersion;\r\n(function (VueVersion) {\r\n    VueVersion[VueVersion[\"VPre25\"] = 0] = \"VPre25\";\r\n    VueVersion[VueVersion[\"V25\"] = 1] = \"V25\";\r\n    VueVersion[VueVersion[\"V30\"] = 2] = \"V30\";\r\n})(VueVersion || (VueVersion = {}));\r\nfunction floatVersionToEnum(v) {\r\n    if (v < 2.5) {\r\n        return VueVersion.VPre25;\r\n    }\r\n    else if (v < 3.0) {\r\n        return VueVersion.V25;\r\n    }\r\n    else {\r\n        return VueVersion.V30;\r\n    }\r\n}\r\nexport function getVueVersionKey(version) {\r\n    var _a;\r\n    return (_a = Object.keys(VueVersion)) === null || _a === void 0 ? void 0 : _a[Object.values(VueVersion).indexOf(version)];\r\n}\r\nexport function inferVueVersion(packagePath) {\r\n    var _a, _b;\r\n    const packageJSONPath = packagePath;\r\n    try {\r\n        if (!packageJSONPath) {\r\n            throw new Error(`Can't find package.json in project`);\r\n        }\r\n        const packageJSON = packageJSONPath && JSON.parse(readFileSync(packageJSONPath, { encoding: 'utf-8' }));\r\n        const vueDependencyVersion = ((_a = packageJSON.dependencies) === null || _a === void 0 ? void 0 : _a.vue) || ((_b = packageJSON.devDependencies) === null || _b === void 0 ? void 0 : _b.vue);\r\n        if (vueDependencyVersion) {\r\n            // use a sloppy method to infer version, to reduce dep on semver or so\r\n            const vueDep = vueDependencyVersion.match(/\\d+(\\.\\d+)?/)[0];\r\n            const sloppyVersion = parseFloat(vueDep);\r\n            return floatVersionToEnum(sloppyVersion);\r\n        }\r\n        const nodeModulesVuePackagePath = require.resolve('vue/package.json', { paths: [packageJSONPath] });\r\n        const nodeModulesVuePackageJSON = JSON.parse(readFileSync(nodeModulesVuePackagePath, { encoding: 'utf-8' }));\r\n        const nodeModulesVueVersion = parseFloat(nodeModulesVuePackageJSON.version.match(/\\d+\\.\\d+/)[0]);\r\n        return floatVersionToEnum(nodeModulesVueVersion);\r\n    }\r\n    catch (e) {\r\n        console.error(e.stack);\r\n        return VueVersion.VPre25;\r\n    }\r\n}\r\n//# sourceMappingURL=vueVersion.js.map","references":[],"map":"{\"version\":3,\"file\":\"vueVersion.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/vueVersion.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,IAAI,CAAC;AAElC,MAAM,CAAN,IAAY,UAIX;AAJD,WAAY,UAAU;IACpB,+CAAM,CAAA;IACN,yCAAG,CAAA;IACH,yCAAG,CAAA;AACL,CAAC,EAJW,UAAU,KAAV,UAAU,QAIrB;AAED,SAAS,kBAAkB,CAAC,CAAS;IACnC,IAAI,CAAC,GAAG,GAAG,EAAE;QACX,OAAO,UAAU,CAAC,MAAM,CAAC;KAC1B;SAAM,IAAI,CAAC,GAAG,GAAG,EAAE;QAClB,OAAO,UAAU,CAAC,GAAG,CAAC;KACvB;SAAM;QACL,OAAO,UAAU,CAAC,GAAG,CAAC;KACvB;AACH,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAmB;;IAClD,OAAO,MAAA,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,0CAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;AAC/E,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,WAA+B;;IAC7D,MAAM,eAAe,GAAG,WAAW,CAAC;IACpC,IAAI;QACF,IAAI,CAAC,eAAe,EAAE;YACpB,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;SACvD;QACD,MAAM,WAAW,GAAG,eAAe,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,eAAe,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QACxG,MAAM,oBAAoB,GAAG,CAAA,MAAA,WAAW,CAAC,YAAY,0CAAE,GAAG,MAAI,MAAA,WAAW,CAAC,eAAe,0CAAE,GAAG,CAAA,CAAC;QAE/F,IAAI,oBAAoB,EAAE;YACxB,sEAAsE;YACtE,MAAM,MAAM,GAAG,oBAAoB,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,MAAM,aAAa,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACzC,OAAO,kBAAkB,CAAC,aAAa,CAAC,CAAC;SAC1C;QAED,MAAM,yBAAyB,GAAG,OAAO,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,KAAK,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;QACpG,MAAM,yBAAyB,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,yBAAyB,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAE,CAAC,CAAC;QAC9G,MAAM,qBAAqB,GAAG,UAAU,CAAC,yBAAyB,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjG,OAAO,kBAAkB,CAAC,qBAAqB,CAAC,CAAC;KAClD;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,KAAK,CAAE,CAAW,CAAC,KAAK,CAAC,CAAC;QAClC,OAAO,UAAU,CAAC,MAAM,CAAC;KAC1B;AACH,CAAC\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/utils/vueVersion.d.ts","writeByteOrderMark":false,"text":"export declare enum VueVersion {\r\n    VPre25 = 0,\r\n    V25 = 1,\r\n    V30 = 2\r\n}\r\nexport declare function getVueVersionKey(version: VueVersion): string;\r\nexport declare function inferVueVersion(packagePath: string | undefined): VueVersion;\r\n"}}
