{"code":"import { getLastChild, buildDocumentation, getDefaultExportNode, getClassDecoratorArgumentType, isClassType } from './componentInfo';\r\nimport { kebabCase } from 'lodash';\r\nexport function analyzeComponentsDefine(tsModule, defaultExportType, checker, tagCasing = 'kebab') {\r\n    let componentsSymbol;\r\n    if (!isClassType(tsModule, defaultExportType)) {\r\n        componentsSymbol = checker.getPropertyOfType(defaultExportType, 'components');\r\n    }\r\n    else {\r\n        // get decorator argument type when class\r\n        const classDecoratorArgumentType = getClassDecoratorArgumentType(tsModule, defaultExportType, checker);\r\n        if (!classDecoratorArgumentType) {\r\n            return undefined;\r\n        }\r\n        componentsSymbol = checker.getPropertyOfType(classDecoratorArgumentType, 'components');\r\n    }\r\n    if (!componentsSymbol || !componentsSymbol.valueDeclaration) {\r\n        return undefined;\r\n    }\r\n    const componentsDeclaration = getLastChild(componentsSymbol.valueDeclaration);\r\n    if (!componentsDeclaration) {\r\n        return undefined;\r\n    }\r\n    if (componentsDeclaration.kind === tsModule.SyntaxKind.ObjectLiteralExpression) {\r\n        const componentsType = checker.getTypeOfSymbolAtLocation(componentsSymbol, componentsDeclaration);\r\n        let insertPos = componentsDeclaration.getStart(componentsDeclaration.getSourceFile(), true) + 1;\r\n        const result = [];\r\n        checker.getPropertiesOfType(componentsType).forEach((s, i, arr) => {\r\n            if (!s.valueDeclaration) {\r\n                return;\r\n            }\r\n            let componentName = s.name;\r\n            if (tagCasing === 'kebab') {\r\n                componentName = kebabCase(s.name);\r\n            }\r\n            if (i === arr.length - 1) {\r\n                insertPos = s.valueDeclaration.getEnd();\r\n            }\r\n            let objectLiteralSymbol;\r\n            if (s.valueDeclaration.kind === tsModule.SyntaxKind.PropertyAssignment) {\r\n                objectLiteralSymbol =\r\n                    checker.getSymbolAtLocation(s.valueDeclaration.initializer) || s;\r\n            }\r\n            else if (s.valueDeclaration.kind === tsModule.SyntaxKind.ShorthandPropertyAssignment) {\r\n                objectLiteralSymbol = checker.getShorthandAssignmentValueSymbol(s.valueDeclaration) || s;\r\n            }\r\n            if (!objectLiteralSymbol) {\r\n                return;\r\n            }\r\n            if (objectLiteralSymbol.flags & tsModule.SymbolFlags.Alias) {\r\n                const definitionSymbol = checker.getAliasedSymbol(objectLiteralSymbol);\r\n                if (!definitionSymbol.valueDeclaration) {\r\n                    return;\r\n                }\r\n                const sourceFile = definitionSymbol.valueDeclaration.getSourceFile();\r\n                const defaultExportNode = getDefaultExportNode(tsModule, sourceFile);\r\n                if (!defaultExportNode) {\r\n                    return;\r\n                }\r\n                result.push({\r\n                    name: componentName,\r\n                    documentation: buildDocumentation(tsModule, definitionSymbol, checker),\r\n                    definition: {\r\n                        path: sourceFile.fileName,\r\n                        start: defaultExportNode.getStart(sourceFile, true),\r\n                        end: defaultExportNode.getEnd()\r\n                    },\r\n                    defaultExportNode\r\n                });\r\n            }\r\n        });\r\n        return {\r\n            start: componentsDeclaration.getStart(componentsDeclaration.getSourceFile(), true),\r\n            end: componentsDeclaration.getEnd(),\r\n            insertPos,\r\n            list: result\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=childComponents.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/typescript/lib/typescript.d.ts","/Users/yoyo930021/git/vetur/server/src/modes/script/componentInfo.ts","/Users/yoyo930021/git/vetur/server/node_modules/@types/lodash/index.d.ts","/Users/yoyo930021/git/vetur/server/src/services/dependencyService.ts"],"map":"{\"version\":3,\"file\":\"childComponents.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/modes/script/childComponents.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/modes/script/childComponents.d.ts","writeByteOrderMark":false,"text":"import type ts from 'typescript';\r\nimport { RuntimeLibrary } from '../../services/dependencyService';\r\nexport interface InternalChildComponent {\r\n    name: string;\r\n    documentation?: string;\r\n    definition?: {\r\n        path: string;\r\n        start: number;\r\n        end: number;\r\n    };\r\n    defaultExportNode?: ts.Node;\r\n}\r\nexport declare function analyzeComponentsDefine(tsModule: RuntimeLibrary['typescript'], defaultExportType: ts.Type, checker: ts.TypeChecker, tagCasing?: string): {\r\n    start: number;\r\n    end: number;\r\n    insertPos: number;\r\n    list: InternalChildComponent[];\r\n} | undefined;\r\n"}}
