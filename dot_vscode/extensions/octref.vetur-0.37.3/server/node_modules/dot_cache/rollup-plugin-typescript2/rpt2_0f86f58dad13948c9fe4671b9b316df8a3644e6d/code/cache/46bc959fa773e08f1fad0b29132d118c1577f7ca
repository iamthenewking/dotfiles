{"code":"export function createTemplateDiagnosticFilter(tsModule) {\r\n    /**\r\n     * Ignores errors when accessing `private` or `protected` members on component.\r\n     *\r\n     * ```vue\r\n     * <template>\r\n     *   <!-- `a` is private but should not provide an error -->\r\n     *   <p>{{ a }}</p>\r\n     * </template>\r\n     *\r\n     * <script lang=\"ts\">\r\n     * import Vue from 'vue'\r\n     * import Component from 'vue-class-component'\r\n     *\r\n     * @Component\r\n     * export default class MyComp extends Vue {\r\n     *   private a = 'Hi'\r\n     * }\r\n     * </script>\r\n     * ```\r\n     */\r\n    const ignorePrivateProtectedViolation = diag => {\r\n        const protectedViolationCode = 2445;\r\n        const privateViolationCode = 2341;\r\n        if (diag.code !== protectedViolationCode && diag.code !== privateViolationCode) {\r\n            return true;\r\n        }\r\n        const source = diag.file;\r\n        if (!source) {\r\n            return true;\r\n        }\r\n        // Only ignore accesses to a member of a component instance\r\n        const target = findNodeFromDiagnostic(diag, source);\r\n        if (target && tsModule.isPropertyAccessExpression(target.parent)) {\r\n            if (target.parent.expression.kind === tsModule.SyntaxKind.ThisKeyword) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    const ignoreNoImplicitAnyViolationInNativeEvent = diag => {\r\n        const noImplicitAnyViolation = [7006, 7031];\r\n        if (!noImplicitAnyViolation.includes(diag.code)) {\r\n            return true;\r\n        }\r\n        const source = diag.file;\r\n        if (!source) {\r\n            return true;\r\n        }\r\n        const target = findNodeFromDiagnostic(diag, source);\r\n        if (target && (tsModule.isParameter(target.parent) || tsModule.isBindingElement(target.parent))) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return mergeFilter([ignorePrivateProtectedViolation, ignoreNoImplicitAnyViolationInNativeEvent]);\r\n}\r\nexport function createScriptSetupDiagnosticFilter(tsModule) {\r\n    const ignoreUnusedVariableViolation = diag => {\r\n        const unusedVariableViolation = [6133];\r\n        const ignoreNodeFns = [tsModule.isVariableStatement, tsModule.isFunctionDeclaration, tsModule.isImportDeclaration];\r\n        if (!unusedVariableViolation.includes(diag.code)) {\r\n            return true;\r\n        }\r\n        const source = diag.file;\r\n        if (!source) {\r\n            return true;\r\n        }\r\n        const target = findNodeFromDiagnostic(diag, source);\r\n        const node = findXXXFromNodeParent(target, ignoreNodeFns);\r\n        if (node && tsModule.isSourceFile(node.parent)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return ignoreUnusedVariableViolation;\r\n}\r\n/**\r\n * Merge an array of filter to create a filter function.\r\n */\r\nfunction mergeFilter(filters) {\r\n    return diag => {\r\n        return filters.every(f => f(diag));\r\n    };\r\n}\r\n/**\r\n * Walk AST tree and get a node which the diagnostic probably refers.\r\n */\r\nfunction findNodeFromDiagnostic(diag, node) {\r\n    if (diag.start === undefined || diag.length === undefined) {\r\n        return undefined;\r\n    }\r\n    if (diag.start < node.getStart() || node.getEnd() < diag.start + diag.length) {\r\n        return undefined;\r\n    }\r\n    const childMatch = node.getChildren().reduce((matched, child) => {\r\n        return matched || findNodeFromDiagnostic(diag, child);\r\n    }, undefined);\r\n    return childMatch ? childMatch : node;\r\n}\r\nfunction findXXXFromNodeParent(node, fns) {\r\n    if (!node) {\r\n        return undefined;\r\n    }\r\n    if (fns.some(fn => fn(node))) {\r\n        return node;\r\n    }\r\n    return findXXXFromNodeParent(node.parent, fns);\r\n}\r\n//# sourceMappingURL=diagnosticFilter.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/typescript/lib/typescript.d.ts","/Users/yoyo930021/git/vetur/server/src/services/dependencyService.ts"],"map":"{\"version\":3,\"file\":\"diagnosticFilter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/typescriptService/diagnosticFilter.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/typescriptService/diagnosticFilter.d.ts","writeByteOrderMark":false,"text":"import type ts from 'typescript';\r\nimport { RuntimeLibrary } from '../dependencyService';\r\ntype DiagnosticFilter = (diagnostic: ts.Diagnostic) => boolean;\r\nexport declare function createTemplateDiagnosticFilter(tsModule: RuntimeLibrary['typescript']): DiagnosticFilter;\r\nexport declare function createScriptSetupDiagnosticFilter(tsModule: RuntimeLibrary['typescript']): DiagnosticFilter;\r\nexport {};\r\n"}}
