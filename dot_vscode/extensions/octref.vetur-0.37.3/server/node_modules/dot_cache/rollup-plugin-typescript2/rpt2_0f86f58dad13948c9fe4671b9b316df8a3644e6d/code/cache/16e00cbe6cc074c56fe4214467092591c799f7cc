{"code":"import path from 'path';\r\nimport { CompletionTriggerKind, SemanticTokensBuilder } from 'vscode-languageserver';\r\nimport { URI } from 'vscode-uri';\r\nimport { LanguageModes } from '../embeddedSupport/languageModes';\r\nimport { NULL_COMPLETION, NULL_HOVER, NULL_SIGNATURE } from '../modes/nullMode';\r\nimport { getFileFsPath } from '../utils/paths';\r\nimport { VueInfoService } from './vueInfoService';\r\nexport async function createProjectService(env, documentService, globalSnippetDir, dependencyService, refTokensService) {\r\n    const vueInfoService = new VueInfoService();\r\n    const languageModes = new LanguageModes();\r\n    function getValidationFlags() {\r\n        const config = env.getConfig();\r\n        return {\r\n            'vue-html': config.vetur.validation.template || config.vetur.validation.templateProps,\r\n            css: config.vetur.validation.style,\r\n            postcss: config.vetur.validation.style,\r\n            scss: config.vetur.validation.style,\r\n            less: config.vetur.validation.style,\r\n            javascript: config.vetur.validation.script\r\n        };\r\n    }\r\n    vueInfoService.init(languageModes);\r\n    await languageModes.init(env, {\r\n        infoService: vueInfoService,\r\n        dependencyService,\r\n        refTokensService\r\n    }, globalSnippetDir);\r\n    return {\r\n        env,\r\n        languageModes,\r\n        async onDocumentFormatting({ textDocument, options }) {\r\n            if (!env.getConfig().vetur.format.enable) {\r\n                return [];\r\n            }\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const modeRanges = languageModes.getAllLanguageModeRangesInDocument(doc);\r\n            const allEdits = [];\r\n            const errMessages = [];\r\n            modeRanges.forEach(modeRange => {\r\n                if (modeRange.mode && modeRange.mode.format) {\r\n                    try {\r\n                        const edits = modeRange.mode.format(doc, { start: modeRange.start, end: modeRange.end }, options);\r\n                        for (const edit of edits) {\r\n                            allEdits.push(edit);\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        errMessages.push(err.toString());\r\n                    }\r\n                }\r\n            });\r\n            if (errMessages.length !== 0) {\r\n                console.error('Formatting failed: \"' + errMessages.join('\\n') + '\"');\r\n                return [];\r\n            }\r\n            return allEdits;\r\n        },\r\n        async onCompletion({ textDocument, position, context }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.doComplete) {\r\n                /**\r\n                 * Only use space as trigger character in `vue-html` mode\r\n                 */\r\n                if (mode.getId() !== 'vue-html' &&\r\n                    context &&\r\n                    (context === null || context === void 0 ? void 0 : context.triggerKind) === CompletionTriggerKind.TriggerCharacter &&\r\n                    context.triggerCharacter === ' ') {\r\n                    return NULL_COMPLETION;\r\n                }\r\n                return mode.doComplete(doc, position);\r\n            }\r\n            return NULL_COMPLETION;\r\n        },\r\n        async onCompletionResolve(item) {\r\n            if (item.data) {\r\n                const uri = item.data.uri;\r\n                const languageId = item.data.languageId;\r\n                /**\r\n                 * Template files need to go through HTML-template service\r\n                 */\r\n                if (uri.endsWith('.template')) {\r\n                    const doc = documentService.getDocument(uri.slice(0, -'.template'.length));\r\n                    const mode = languageModes.getMode(languageId);\r\n                    if (doc && mode && mode.doResolve) {\r\n                        return mode.doResolve(doc, item);\r\n                    }\r\n                }\r\n                if (uri && languageId) {\r\n                    const doc = documentService.getDocument(uri);\r\n                    const mode = languageModes.getMode(languageId);\r\n                    if (doc && mode && mode.doResolve) {\r\n                        return mode.doResolve(doc, item);\r\n                    }\r\n                }\r\n            }\r\n            return item;\r\n        },\r\n        async onHover({ textDocument, position }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.doHover) {\r\n                return mode.doHover(doc, position);\r\n            }\r\n            return NULL_HOVER;\r\n        },\r\n        async onDocumentHighlight({ textDocument, position }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.findDocumentHighlight) {\r\n                return mode.findDocumentHighlight(doc, position);\r\n            }\r\n            return [];\r\n        },\r\n        async onDefinition({ textDocument, position }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.findDefinition) {\r\n                return mode.findDefinition(doc, position);\r\n            }\r\n            return [];\r\n        },\r\n        async onReferences({ textDocument, position }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.findReferences) {\r\n                return mode.findReferences(doc, position);\r\n            }\r\n            return [];\r\n        },\r\n        async onDocumentLinks({ textDocument }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const documentContext = {\r\n                resolveReference: ref => {\r\n                    if (ref[0] === '/') {\r\n                        return URI.file(path.resolve(env.getProjectRoot(), ref)).toString();\r\n                    }\r\n                    const fsPath = getFileFsPath(doc.uri);\r\n                    return URI.file(path.resolve(fsPath, '..', ref)).toString();\r\n                }\r\n            };\r\n            const links = [];\r\n            languageModes.getAllLanguageModeRangesInDocument(doc).forEach(m => {\r\n                if (m.mode.findDocumentLinks) {\r\n                    links.push.apply(links, m.mode.findDocumentLinks(doc, documentContext));\r\n                }\r\n            });\r\n            return links;\r\n        },\r\n        async onDocumentSymbol({ textDocument }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const symbols = [];\r\n            languageModes.getAllLanguageModeRangesInDocument(doc).forEach(m => {\r\n                if (m.mode.findDocumentSymbols) {\r\n                    symbols.push.apply(symbols, m.mode.findDocumentSymbols(doc));\r\n                }\r\n            });\r\n            return symbols;\r\n        },\r\n        async onDocumentColors({ textDocument }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const colors = [];\r\n            const distinctModes = new Set();\r\n            languageModes.getAllLanguageModeRangesInDocument(doc).forEach(m => {\r\n                distinctModes.add(m.mode);\r\n            });\r\n            for (const mode of distinctModes) {\r\n                if (mode.findDocumentColors) {\r\n                    colors.push.apply(colors, mode.findDocumentColors(doc));\r\n                }\r\n            }\r\n            return colors;\r\n        },\r\n        async onColorPresentations({ textDocument, color, range }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, range.start);\r\n            if (mode && mode.getColorPresentations) {\r\n                return mode.getColorPresentations(doc, color, range);\r\n            }\r\n            return [];\r\n        },\r\n        async onSignatureHelp({ textDocument, position }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, position);\r\n            if (mode && mode.doSignatureHelp) {\r\n                return mode.doSignatureHelp(doc, position);\r\n            }\r\n            return NULL_SIGNATURE;\r\n        },\r\n        async onFoldingRanges({ textDocument }) {\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const lmrs = languageModes.getAllLanguageModeRangesInDocument(doc);\r\n            const result = [];\r\n            lmrs.forEach(lmr => {\r\n                if (lmr.mode.getFoldingRanges) {\r\n                    lmr.mode.getFoldingRanges(doc).forEach(r => result.push(r));\r\n                }\r\n                result.push({\r\n                    startLine: lmr.start.line,\r\n                    startCharacter: lmr.start.character,\r\n                    endLine: lmr.end.line,\r\n                    endCharacter: lmr.end.character\r\n                });\r\n            });\r\n            return result;\r\n        },\r\n        async onCodeAction({ textDocument, range, context }) {\r\n            if (!env.getConfig().vetur.languageFeatures.codeActions) {\r\n                return [];\r\n            }\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const mode = languageModes.getModeAtPosition(doc, range.start);\r\n            if (languageModes.getModeAtPosition(doc, range.end) !== mode) {\r\n                return [];\r\n            }\r\n            if (mode && mode.getCodeActions) {\r\n                return mode.getCodeActions(doc, range, /*formatParams*/ {}, context);\r\n            }\r\n            return [];\r\n        },\r\n        async onCodeActionResolve(action) {\r\n            const data = action.data;\r\n            if (data) {\r\n                const uri = data.uri;\r\n                const languageId = data.languageId;\r\n                if (uri && languageId) {\r\n                    const doc = documentService.getDocument(uri);\r\n                    const mode = languageModes.getMode(languageId);\r\n                    if (doc && mode && mode.doCodeActionResolve) {\r\n                        return mode.doCodeActionResolve(doc, action);\r\n                    }\r\n                }\r\n            }\r\n            return action;\r\n        },\r\n        async onWillRenameFile(fileRename) {\r\n            var _a, _b;\r\n            if (!env.getConfig().vetur.languageFeatures.updateImportOnFileMove) {\r\n                return [];\r\n            }\r\n            const textDocumentEdit = (_b = (_a = languageModes.getMode('typescript')) === null || _a === void 0 ? void 0 : _a.getRenameFileEdit) === null || _b === void 0 ? void 0 : _b.call(_a, fileRename);\r\n            return textDocumentEdit !== null && textDocumentEdit !== void 0 ? textDocumentEdit : [];\r\n        },\r\n        async onSemanticTokens(params) {\r\n            var _a, _b;\r\n            if (!env.getConfig().vetur.languageFeatures.semanticTokens) {\r\n                return {\r\n                    data: []\r\n                };\r\n            }\r\n            const { textDocument } = params;\r\n            const range = 'range' in params ? params.range : undefined;\r\n            const doc = documentService.getDocument(textDocument.uri);\r\n            const modes = languageModes.getAllLanguageModeRangesInDocument(doc);\r\n            const data = [];\r\n            for (const mode of modes) {\r\n                const tokenData = (_b = (_a = mode.mode).getSemanticTokens) === null || _b === void 0 ? void 0 : _b.call(_a, doc, range);\r\n                data.push(...(tokenData !== null && tokenData !== void 0 ? tokenData : []));\r\n            }\r\n            const builder = new SemanticTokensBuilder();\r\n            const sorted = data.sort((a, b) => {\r\n                return a.line - b.line || a.character - b.character;\r\n            });\r\n            sorted.forEach(token => builder.push(token.line, token.character, token.length, token.classificationType, token.modifierSet));\r\n            return builder.build();\r\n        },\r\n        async doValidate(doc, cancellationToken) {\r\n            const diagnostics = [];\r\n            if (doc.languageId === 'vue') {\r\n                const validationFlags = getValidationFlags();\r\n                for (const lmr of languageModes.getAllLanguageModeRangesInDocument(doc)) {\r\n                    if (lmr.mode.doValidation) {\r\n                        if (validationFlags[lmr.mode.getId()]) {\r\n                            diagnostics.push.apply(diagnostics, await lmr.mode.doValidation(doc, cancellationToken));\r\n                        }\r\n                        // Special case for template type checking\r\n                        else if (lmr.mode.getId() === 'vue-html' &&\r\n                            env.getConfig().vetur.experimental.templateInterpolationService) {\r\n                            diagnostics.push.apply(diagnostics, await lmr.mode.doValidation(doc, cancellationToken));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (cancellationToken === null || cancellationToken === void 0 ? void 0 : cancellationToken.isCancellationRequested) {\r\n                return null;\r\n            }\r\n            return diagnostics;\r\n        },\r\n        async dispose() {\r\n            languageModes.dispose();\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=projectService.js.map","references":["/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver/lib/common/api.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-languageserver-textdocument/lib/umd/main.d.ts","/Users/yoyo930021/git/vetur/server/node_modules/vscode-uri/lib/umd/index.d.ts","/Users/yoyo930021/git/vetur/server/src/embeddedSupport/embeddedSupport.ts","/Users/yoyo930021/git/vetur/server/src/embeddedSupport/languageModes.ts","/Users/yoyo930021/git/vetur/server/src/modes/nullMode.ts","/Users/yoyo930021/git/vetur/server/src/types.ts","/Users/yoyo930021/git/vetur/server/src/utils/cancellationToken.ts","/Users/yoyo930021/git/vetur/server/src/utils/paths.ts","/Users/yoyo930021/git/vetur/server/src/services/dependencyService.ts","/Users/yoyo930021/git/vetur/server/src/services/documentService.ts","/Users/yoyo930021/git/vetur/server/src/services/EnvironmentService.ts","/Users/yoyo930021/git/vetur/server/src/services/RefTokenService.ts","/Users/yoyo930021/git/vetur/server/src/services/vueInfoService.ts"],"map":"{\"version\":3,\"file\":\"projectService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/projectService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/yoyo930021/git/vetur/server/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/projectService.d.ts","writeByteOrderMark":false,"text":"import { CodeAction, CodeActionParams, ColorInformation, ColorPresentation, ColorPresentationParams, CompletionItem, CompletionList, CompletionParams, Definition, Diagnostic, DocumentColorParams, DocumentFormattingParams, DocumentHighlight, DocumentLink, DocumentLinkParams, DocumentSymbolParams, FileRename, FoldingRange, FoldingRangeParams, Hover, Location, SemanticTokens, SemanticTokensParams, SemanticTokensRangeParams, SignatureHelp, SymbolInformation, TextDocumentEdit, TextDocumentPositionParams, TextEdit } from 'vscode-languageserver';\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { LanguageModes } from '../embeddedSupport/languageModes';\r\nimport { VCancellationToken } from '../utils/cancellationToken';\r\nimport { DependencyService } from './dependencyService';\r\nimport { DocumentService } from './documentService';\r\nimport { EnvironmentService } from './EnvironmentService';\r\nimport { RefTokensService } from './RefTokenService';\r\nexport interface ProjectService {\r\n    env: EnvironmentService;\r\n    languageModes: LanguageModes;\r\n    onDocumentFormatting(params: DocumentFormattingParams): Promise<TextEdit[]>;\r\n    onCompletion(params: CompletionParams): Promise<CompletionList>;\r\n    onCompletionResolve(item: CompletionItem): Promise<CompletionItem>;\r\n    onHover(params: TextDocumentPositionParams): Promise<Hover>;\r\n    onDocumentHighlight(params: TextDocumentPositionParams): Promise<DocumentHighlight[]>;\r\n    onDefinition(params: TextDocumentPositionParams): Promise<Definition>;\r\n    onReferences(params: TextDocumentPositionParams): Promise<Location[]>;\r\n    onDocumentLinks(params: DocumentLinkParams): Promise<DocumentLink[]>;\r\n    onDocumentSymbol(params: DocumentSymbolParams): Promise<SymbolInformation[]>;\r\n    onDocumentColors(params: DocumentColorParams): Promise<ColorInformation[]>;\r\n    onColorPresentations(params: ColorPresentationParams): Promise<ColorPresentation[]>;\r\n    onSignatureHelp(params: TextDocumentPositionParams): Promise<SignatureHelp | null>;\r\n    onFoldingRanges(params: FoldingRangeParams): Promise<FoldingRange[]>;\r\n    onCodeAction(params: CodeActionParams): Promise<CodeAction[]>;\r\n    onCodeActionResolve(action: CodeAction): Promise<CodeAction>;\r\n    onWillRenameFile(fileRename: FileRename): Promise<TextDocumentEdit[]>;\r\n    onSemanticTokens(params: SemanticTokensParams | SemanticTokensRangeParams): Promise<SemanticTokens>;\r\n    doValidate(doc: TextDocument, cancellationToken?: VCancellationToken): Promise<Diagnostic[] | null>;\r\n    dispose(): Promise<void>;\r\n}\r\nexport declare function createProjectService(env: EnvironmentService, documentService: DocumentService, globalSnippetDir: string | undefined, dependencyService: DependencyService, refTokensService: RefTokensService): Promise<ProjectService>;\r\n"}}
